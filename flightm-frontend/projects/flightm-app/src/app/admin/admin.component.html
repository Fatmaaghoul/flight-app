<div class="admin-container">
    <h2>Administration</h2>
  
    <div class="admin-tabs">
      <button 
        [class.active]="activeTab === 'reservations'" 
        (click)="loadReservations()">
        Réservations
      </button>
      <button 
        [class.active]="activeTab === 'audit'" 
        (click)="loadAuditLogs()">
        Logs d'Audit
      </button>
      <button [class.active]="activeTab === 'addVol'" (click)="activeTab = 'addVol'">
        Ajouter un Vol
      </button>
      <button [class.active]="activeTab === 'vols'" (click)="loadVols()">
        Liste des Vols
      </button>
    </div>
  
    <div *ngIf="loading" class="loading">
      <div class="spinner"></div>
      <p>Chargement...</p>
    </div>

    <div *ngIf="!loading && activeTab === 'reservations'">
      <h3>Liste des Réservations ({{ reservations.length }})</h3>
      
      <div *ngIf="reservations.length === 0" class="empty-state">
        <p>Aucune réservation trouvée</p>
      </div>
  
      <div class="reservations-list">
        <div *ngFor="let res of reservations" class="reservation-card">
          <div class="reservation-header">
            <h4>Réservation #{{ res.id }} </h4>
            <span class="status">{{ res.confirme ? ' Confirmée' : ' En attente' }}</span>
          </div>
  
          <div class="reservation-details">
            <div class="detail">
              <strong>Client:</strong> {{ res.nomClient }} 
            </div>
            <div class="detail">
              <strong>Email:</strong> {{ res.emailClient }} 
            </div>
            <div class="detail">
              <strong>Places:</strong> {{ res.nombrePlaces }}
            </div>
            
          </div>
  
          <div class="reservation-actions">
            <button 
              class="btn-cancel"
              (click)="cancelReservation(res.id)">
              Annuler
            </button>
          </div>
        </div>
      </div>
    </div>
  
  
    <div *ngIf="!loading && activeTab === 'audit'">
      <h3>Logs d'Audit ({{ auditLogs.length }})</h3>
      
      <div *ngIf="auditLogs.length === 0" class="empty-state">
        <p>Aucun log d'audit trouvé</p>
      </div>
  
      <div class="audit-logs">
        <div *ngFor="let log of auditLogs" class="log-entry">
          <div class="log-header">
            <span class="log-type">{{ log.action }}</span>
            <span class="log-date">{{ formatDate(log.dateAction) }}</span>
          </div>
          
          <div class="log-details">
            <p><strong>Détails:</strong> {{ log.details }}</p>
            <p *ngIf="log.reservationId"><strong>Réservation:</strong> {{ log.reservationId }}</p>
            <p *ngIf="log.utilisateur"><strong>Utilisateur:</strong> {{ log.utilisateur }}</p>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="!loading && activeTab === 'addVol'" class="add-vol-form">
        <h3>Ajouter un nouveau vol</h3>
    
        <form (ngSubmit)="addVol()" class="vol-form">
          <div class="form-row">
            <div class="form-group">
              <label>Ville de départ *</label>
              <input type="text" [(ngModel)]="newVol.villeDepart" name="villeDepart" required>
            </div>
    
            <div class="form-group">
              <label>Ville d'arrivée *</label>
              <input type="text" [(ngModel)]="newVol.villeArrivee" name="villeArrivee" required>
            </div>
          </div>
    
          <div class="form-row">
            <div class="form-group">
              <label>Date de départ</label>
              <input type="datetime-local" [(ngModel)]="newVol.dateDepart" name="dateDepart">
            </div>
    
            <div class="form-group">
              <label>Date d'arrivée</label>
              <input type="datetime-local" [(ngModel)]="newVol.dateArrivee" name="dateArrivee">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Prix (€) *</label>
              <input type="number" [(ngModel)]="newVol.prix" name="prix" min="0" step="0.01" required>
            </div>
    
            <div class="form-group">
              <label>Temps de trajet (minutes) *</label>
              <input type="number" [(ngModel)]="newVol.tempsTrajet" name="tempsTrajet" min="0" required>
            </div>
          </div>
    
          <div class="form-row">
            <div class="form-group">
              <label>Capacité (places) *</label>
              <input type="number" [(ngModel)]="newVol.capacite" name="capacite" min="1" required>
            </div>
    
            <div class="form-group">
              <label>Places disponibles *</label>
              <input type="number" [(ngModel)]="newVol.placesDisponibles" name="placesDisponibles" 
                     [max]="newVol.capacite" min="0" required>
            </div>
          </div>
          <div class="form-actions">
            <button type="button" class="btn-cancel" (click)="resetVolForm()">
            Réinitialiser
            </button>
            
            <button type="submit" class="btn-confirm">
            Ajouter le Vol
            </button>
          </div>
        </form>
      </div>
    </div>
    
    <div *ngIf="!loading && activeTab === 'vols'">
      <h3>Liste des Vols ({{ vols.length }})</h3>
      
      <div *ngIf="vols.length === 0" class="empty-state">
        <p>Aucun vol trouvé</p>
      </div>
    
      <div class="vols-list">
        <div *ngFor="let vol of vols" class="vol-card">
          <div class="vol-header">
            <h4>{{ vol.villeDepart }} → {{ vol.villeArrivee }}</h4>
            <span class="vol-price">{{ vol.prix }} DT</span>
          </div>
    
          <div class="vol-details">
            <div class="detail">
              <strong>Départ:</strong> {{ formatDate(vol.dateDepart) }}
            </div>
            <div class="detail">
              <strong>Arrivée:</strong> {{ formatDate(vol.dateArrivee) }}
            </div>
            <div class="detail">
              <strong>Durée:</strong> {{ formatDuration(vol.tempsTrajet) }}
            </div>
            <div class="detail">
              <strong>Places:</strong> {{ vol.placesDisponibles }}/{{ vol.capacite }}
            </div>
          </div>
    
          <div class="vol-actions">
            <button class="btn-delete" (click)="deleteVol(vol.id)">
              Supprimer
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <div class="admin-container">
        <div class="admin-header">
          <h2>Administration</h2>
          <button class="close-btn" (click)="closeAdmin()">×</button>
        </div>
       
  </div>
